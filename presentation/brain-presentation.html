<!DOCTYPE html>

<!--
  EBI HTML5 slide template
  
  Adapted for EBI by Samuel Croset
  URL: http://code.google.com/p/ebi-slides-template/

  Original Authors for Google:
  	Luke Mahé (code)
	Marcin Wichary (code and design)
           
    Dominic Mazzoni (browser compatibility)
    Charles Chen (ChromeVox support)
	Original URL: http://code.google.com/p/html5slides/
-->

<html>
<head>
<title>Brain 1.4.1</title>

<meta charset='utf-8'>
<script
    src='http://ebi-slides-template.googlecode.com/svn/trunk/slides.js'></script>
</head>

<style>
/*
	Normal users: Leave it like that
	Advanced users: Your individual styles here, or just use inline styles if that’s what you want.
*/
</style>

<body style='display: none'>

    <section class="slides layout-regular template-ebi-light">

        <!-- Your slides (<article>s) go here. Delete or comment out the
           slides below. -->


        <article class='biglogo'></article>

        <article>
            <h1>Brain-1.4.1</h1>
            <br>
            <h3>A library for the OWL2 EL profile</h3>
            <p>
                <u>Samuel Croset</u>, John Overington, Dietrich Rebholz-Schuhmann 
            </p>
            <p>
	        	May 26, 2013 - <a href="http://www.ebi.ac.uk/~jupp/owled2013/index.html">OWLED 2013</a>
            </p>
        </article>
        
        <article>
          <h3>Ontologies and biomedical analyses</h3>
        <p>
          <img class='centered' style='height: 520px' src='heatmap.png'>
        </p>
        <div class='source'>
          Comparison of drug's mode of action similarities (with current therapeutic indications)
        </div>
      </article>


        <article>
            <h3>Motivations</h3>
            <ul>
            	<li>Description logics as methodology for analyses</li>
                <li><a href="http://www.w3.org/TR/owl2-profiles/#OWL_2_EL">OWL2 EL</a> enables a new type of biomedical data analyses</li>
                <li>Fast and scalable reasoning with <a href="https://code.google.com/p/elk-reasoner/">ELK</a></li>
                <li>Lots of query answering on integrated data - hard to maintain</li>
                <li>Being able to handle various formats (CSV, XML, etc...)</li>
                <li>Something in-between <a href="http://protege.stanford.edu/">Protege</a> and
                    the <a href="http://owlapi.sourceforge.net/">OWL-API</a></li>
                <li>Ontologies as web application backend (<a href="http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller">MVC</a>)</li>
                <li>(Practicing Java)</li>
            </ul>
        </article>

        <article>
            <h3>Brain - What is it?</h3>
            <ul>
            	<li>Java library for the OWL2 EL profile (biomedical domain)</li>
            	<li><a href="http://en.wikipedia.org/wiki/Facade_pattern">Facade pattern</a> over the OWL-API and ELK 
            	(simplified interface to a larger body of code)</li>
            	<li>OWL queries and reasoning for biomedical analyses</li>
				<li>(Thread safe) for web applications</li>
				<li>Extra features: Semantic similarity, graph export...</li>
            </ul>
        </article>
        
        <article>
            <h3>Design of the library</h3>
            <ul>
            	<li><b>Unique ontology (knowledge base):</b> Keeping it simple</li>
            	<li><b>Unique names:</b> Prevent ambiguities when working with shortforms. Biomedical names are often unique identifiers 
            	(<code>GO_0001820</code>
            	or <code>P04637</code>)</li>
            	<li><b>Manchester syntax:</b> Typeless interaction, expressions are entered as strings (<code>"drug that positively-perturbs some Pyridoxal kinase"</code>)</li>
				<li><b>Error-handling driven:</b> If there is a problem, I want to know it</li>
				<li><b>Concurrency management:</b> Synchronization of "dangerous" methods (not perfect but works)</li>
            </ul>
        </article>

        <article>
            <h3>Example of axiom</h3>
            <p>Natural language:</p>
            <p>
                <code>A nucleus is part of some cells.</code>
            </p>
            <p>Description logics:</p>
            <p>
                <code>Nucleus ⊑ ∃part-of.Cell</code>
            </p>
            <p>OBO (without identifiers):</p>
            <p>
                            <section>
                <pre>
[Term]
id: Nucleus
relationship: part_of Cell</pre>
</section>
            </p>
            <p>OWL (Manchester syntax):</p>
            <p>
                <code>Nucleus subClassOf part-of some Cell</code>
            </p>
        </article>


        <article class='smaller'>
            <h3>OWL-API implementation of the axiom</h3>
            <section>
                <pre>
//Create a manager and define the base IRI for the ontology
// and prepare a factory
OWLOntologyManager manager = OWLManager.createOWLOntologyManager();
String base = "http://www.example.org/";
OWLOntology ontology = manager.createOntology(IRI.create(base + "ontology.owl"));
OWLDataFactory factory = manager.getOWLDataFactory();

//Declare the classes
OWLClass nucleus = factory.getOWLClass(IRI.create(base + "Nucleus"));
OWLClass cell = factory.getOWLClass(IRI.create(base + "Cell"));
OWLObjectProperty partOf = 
        factory.getOWLObjectProperty(IRI.create(base + "part-of"));
OWLClassExpression partOfSomeCell = factory.getOWLObjectSomeValuesFrom(partOf,cell);

//Add the axiom to the ontology
OWLSubClassOfAxiom axiom = factory.getOWLSubClassOfAxiom(nucleus, partOfSomeCell);
AddAxiom addAxiom = new AddAxiom(ontology, axiom);
manager.applyChange(addAxiom);

//Save
manager.saveOntology(ontology, IRI.create("file:/home/samuel/Desktop/ontology.owl"));
</pre>
            </section>
        </article>

        <article>
            <h3>Brain implementation of the axiom</h3>
            <section>
                <pre>
Brain brain = new Brain();
brain.addClass("Nucleus");
brain.addClass("Cell");
brain.addObjectProperty("part-of");
brain.subClassOf("Nucleus", "part-of some Cell");
brain.save("/home/samuel/Desktop/ontology.owl");
            </pre>
            </section>
        </article>

        <article class='smaller'>
            <h3>Reasoning with ELK and the OWL-API</h3>
            <section>
                <pre>
OWLOntologyManager manager = OWLManager.createOWLOntologyManager();
File file = new File("/home/samuel/Desktop/ontology.owl");
OWLOntology ontology = manager.loadOntologyFromOntologyDocument(file);
String base = "http://www.example.org/";
OWLDataFactory factory = manager.getOWLDataFactory();
//Prepare the anonymous query "part-of some Cell"
OWLClass cell = factory.getOWLClass(IRI.create(base + "Cell"));
OWLObjectProperty partOf = 
        factory.getOWLObjectProperty(IRI.create(base + "part-of"));
OWLClassExpression partOfSomeCell = factory.getOWLObjectSomeValuesFrom(partOf,cell);
OWLClass temporary = factory.getOWLClass(IRI.create("temp"));
OWLEquivalentClassesAxiom axiom = 
        factory.getOWLEquivalentClassesAxiom(temporary, partOfSomeCell);
AddAxiom addAxiom = new AddAxiom(ontology, axiom);
manager.applyChange(addAxiom);
//Creates the reasoner
OWLReasonerFactory reasonerFactory = new ElkReasonerFactory();
OWLReasoner reasoner = reasonerFactory.createReasoner(ontology);
reasoner.precomputeInferences(InferenceType.CLASS_HIERARCHY);
//Get the descendant classes of "part-of some Cell"
Set&lt;OWLClass&gt; subClasses = reasoner.getSubClasses(temporary, false).getFlattened();
for (OWLClass subClass : subClasses) {
  System.out.println("subClass: " + subClass);
}
reasoner.dispose();
</pre>
            </section>
        </article>

        <article>
            <h3>Query using Brain</h3>
            <section>
                <pre>
Brain brain = new Brain();
brain.learn("/home/samuel/Desktop/ontology.owl");

List&lt;String&gt; subClasses = 
                    brain.getSubClasses("part-of some Cell", false);
        
for (String subClass : subClasses) {
  System.out.println("subClass: " + subClass);
}

brain.sleep();
            </pre>
            </section>
        </article>
        
        <article>
            <h3>JUnit - Competency questions driven development</h3>
            <section>
                <pre>
@Test
public void testAxiom() throws ClassExpressionException {
  //My knowledge base should be able to answer this
  assertEquals("Nucleus", 
          brain.getSubClasses("part-of some Cell", false).get(0));
}
            </pre>
            </section>
<h3>Semantic similarity</h3>
            <section>
                <pre>
float sim = brain.getJaccardSimilarityIndex("Nucleus", "Cell");
            </pre>
            </section>
        </article>
        
        <article>
            <h3>Web applications: <u>Model</u>-View-Controller</h3>
            <section>
              <pre>
//Controller method routed from GET /{name}
//Example: http://www.example.org/John
public static void showUser(String name) {
  //SQL query over the Model (relational database)
  User user = User.find(
   "SELECT DISTINCT user FROM User WHERE user.name=?", name).first();
  render(user);
}
            </pre>
            </section>
            <section>
            <pre>
&lt;!-- View (HTML template) rendered on browser --&gt;
&lt;h1&gt;Hello ${user.name}&lt;/h1&gt;
            </pre>
            </section>
        </article>
        
        <article>
            <h3>Web applications with Brain: <u>Model</u>-View-Controller</h3>
            <section>
              <pre>
//Controller method routed from GET /{name}
//Example: http://www.example.org/Cell
public static void showOwlClass(String name) {
  //OWL query over ontology
  OWLClass owlClass = brain.getOWLClass(name);
  List&lt;String&gt; parts = 
               brain.getSubClasses("part-of some " + name, false);
               
  render(name, parts);
}
            </pre>
            </section>
            <section>
            <pre>
&lt;!-- View (HTML template) --&gt;
&lt;h1&gt;OWL Class: ${name}&lt;/h1&gt;
#{list items:parts, as:'part' }
  &lt;div&gt;subClass: ${part}&lt;/div&gt;
#{/list}
            </pre>
            </section>
        </article>
        
        <article>
		<h3>Taxonomic trees (SVG)</h3>
   			 <object data="tree.svg" type="image/svg+xml"></object>
        </article>

        <article>
            <h3>Conclusion</h3>
            <ul>
            	<li>Currently used in production by a couple of projects: <a href="http://www.virtualflybrain.org/site/vfb_site/overview.htm">
            	Virtual Fly Brain</a> and <a href="https://www.ebi.ac.uk/chembl/ftc">Functional Therapeutic Chemical Classification System</a></li>
                <li>This presentation: <a href="http://bit.ly/SULODn">http://bit.ly/SULODn</a></li>
                <li>Search for "brain owl library"</li>
                <li><a
                    href="https://github.com/loopasam/Brain/wiki">Documentation</a></li>
                <li><a href="http://samuelcroset.com/contact">Questions/Feature
                        request</a></li>
            </ul>
            <hr><h3>Thank you for your attention! Questions?</h3>
        </article>
    </section>

</body>
</html>
